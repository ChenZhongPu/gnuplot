<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js rust">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Gnuplot Port For Matplotlib</title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "rust";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="intro.html">Introduction</a></li><li class="chapter-item expanded "><a href="ch1/index.html"><strong aria-hidden="true">1.</strong> Introductory</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch1/basic_usage.html"><strong aria-hidden="true">1.1.</strong> Basic Usage</a></li><li class="chapter-item expanded "><a href="ch1/tutorials.html"><strong aria-hidden="true">1.2.</strong> More Tutorials</a></li><li class="chapter-item expanded "><a href="ch1/examples.html"><strong aria-hidden="true">1.3.</strong> More Examples</a></li></ol></li><li class="chapter-item expanded "><a href="cook/index.html"><strong aria-hidden="true">2.</strong> Cookbook</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="cook/1_30.html"><strong aria-hidden="true">2.1.</strong> Item 1-30</a></li></ol></li><li class="chapter-item expanded "><a href="fundamental/index.html"><strong aria-hidden="true">3.</strong> Fundamentals of Data Visualization</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="fundamental/intro.html"><strong aria-hidden="true">3.1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="fundamental/vizdata.html"><strong aria-hidden="true">3.2.</strong> Visualizing data: Mapping data onto aesthetics</a></li><li class="chapter-item expanded "><a href="fundamental/coor.html"><strong aria-hidden="true">3.3.</strong> Coordinate systems and axes</a></li><li class="chapter-item expanded "><a href="fundamental/color.html"><strong aria-hidden="true">3.4.</strong> Color scales</a></li><li class="chapter-item expanded "><a href="fundamental/dirviz.html"><strong aria-hidden="true">3.5.</strong> Directory of visualizations</a></li><li class="chapter-item expanded "><a href="fundamental/amounts.html"><strong aria-hidden="true">3.6.</strong> Visualizing amounts</a></li></ol></li><li class="chapter-item expanded "><a href="apdx/index.html"><strong aria-hidden="true">4.</strong> Appendix</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="apdx/abbre.html"><strong aria-hidden="true">4.1.</strong> Common Abbreviations</a></li><li class="chapter-item expanded "><a href="apdx/time_format.html"><strong aria-hidden="true">4.2.</strong> Time Format</a></li><li class="chapter-item expanded "><a href="apdx/greek.html"><strong aria-hidden="true">4.3.</strong> Greek Letters</a></li><li class="chapter-item expanded "><a href="apdx/3d.html"><strong aria-hidden="true">4.4.</strong> 3D Data</a></li><li class="chapter-item expanded "><a href="apdx/palette.html"><strong aria-hidden="true">4.5.</strong> Palettes</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Gnuplot Port For Matplotlib</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/ChenZhongPu/gnuplot" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<p>Nowadays, people may think <a href="http://gnuplot.info/">Gnuplot</a> is an old, awkward graphing utility. <em>Pace</em> to those comments, I still enjoy the flexibility brought by <code>gnuplot</code>.</p>
<blockquote>
<p>In the Unix tradition, gnuplot is a simple tool, doing (mostly) one thing, and doing it very, very well.</p>
</blockquote>
<p>In this book, I would like to <em>reinvent the wheels</em> by reintroducing the tutorial of <a href="https://matplotlib.org/">Matplotlib</a>. </p>
<p><strong>Disclaimer</strong>: I have to admit that Python is great, and <code>Matplotlib</code> is powerful. So this book is intended to serve as a reference for people who want to try something new.</p>
<p>Matplotlib can be well integrated with other awesome libraries (e.g., <code>numpy</code> and <code>pandas</code>) in Python, so it is user-friendly for Python developers and researchers, especially in the domain of machine learning. On the other hand, many developers and researchers just want to <em>plot</em> and <em>visualize</em> their experimental results. To this end, a lightweight plot utility is in demand, and I think gnuplot is born to do so.</p>
<p>Data and code of this book can be found in <a href="https://github.com/ChenZhongPu/gnuplot">GitHub</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="introductory"><a class="header" href="#introductory">Introductory</a></h1>
<p>These tutorials cover the basics of creating visualizations with gnuplot, as well as some best-practices in using the tool effectively.</p>
<p>Note that I will use the default terminal <code>qt</code> on my macOS, and those figures (<code>.svg</code>) are exported by gnuplot GUI windows by invoking the <code>load</code> command in gnuplot's prompt. As for the output in other formats (e.g., <code>eps</code>, <code>pdf</code> and <code>tex</code>), I will point out the <em>terminal</em> explicitly in the context.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="basic-usage"><a class="header" href="#basic-usage">Basic Usage</a></h1>
<p>This article is adapted from <a href="https://matplotlib.org/stable/tutorials/introductory/usage.html">Basic Usage</a>.</p>
<blockquote>
<p>All scripts in this article can be found <code>script/basic_usage</code>.</p>
</blockquote>
<p>This tutorial covers some basic usage patterns and best practices to help you get started with gnuplot.</p>
<p>Once gnuplot is installed, you can use it in either interactive or batch mode. As for the interactive, it can usually be invoked by issuing the <code>gnuplot</code> command at the shell prompt. Once launched, gnuplot displays a welcome message and then replaces the shell prompt with a <code>gnuplot&gt;</code> prompt. Anything entered at this prompt is interpreted as gnuplot commands until you issue an <code>exit</code> or <code>quit</code> command,</p>
<p>Also, the scripts for plotting can be stored in a plain text file (usually suffixed with <code>.gp</code>), and it can be executed by </p>
<pre><code class="language-sh">gunplot&gt; load &quot;&lt;file-name&gt;.gp&quot;
</code></pre>
<p>Note that both single quote and double quote are accepted.</p>
<h2 id="a-simple-example"><a class="header" href="#a-simple-example">A simple example</a></h2>
<p>The most important command in gnuplot is <code>plot</code>. To draw a line using several points:</p>
<pre><code>$data &lt;&lt; EOD
1 1
2 4
3 2
4 3
EOD
plot $data with lines
</code></pre>
<p><img src="ch1/img/simple_example.svg" alt="simple_example" /></p>
<p>As you can see, the default <em>style</em> of gnuplot is different from that of Matplotlib. For example,</p>
<ul>
<li>The line is thinner.</li>
<li>The font of labels on axes is smaller.</li>
<li>The legend is displayed.</li>
<li>...</li>
</ul>
<p>Only a few extra commands are required to custom those styles. For example, <code>unset key</code> means &quot;<em>do not display the legend</em>&quot;. If you prefer to some style for your plotting, you can save these configs in a file for reuses. See more at <a href="ch1/../cook/1_30.html#3-how-to-reuse-gnuplots-styles">How to reuse gnuplot's styles</a>.</p>
<h2 id="parts-of-a-figure"><a class="header" href="#parts-of-a-figure">Parts of a Figure</a></h2>
<p>Here are the components of a gnuplot Figure.</p>
<p><img src="ch1/img/anatomy.svg" alt="Anatomy of a figure" /></p>
<p>The code for above can be found at <code>anatomy.gp</code>.</p>
<h2 id="types-of-inputs-to-plotting-functions"><a class="header" href="#types-of-inputs-to-plotting-functions">Types of inputs to plotting functions</a></h2>
<p>Plotting command (<code>plot</code>) expects a file or a mathematical function as the input. For example, the <code>plot sin(x)</code> is able to output a figure of <em>sin</em> whose default range of <em>x</em> is from -10 to 10. In practice, the input data is usually stored in a file.</p>
<blockquote>
<p>In my opinion, it is more common to <em>read</em> external data file for visualization tasks, and gnuplot's way to plotting is more ergonomic in practice, because we can separate data from plotting logics and will not concern about the <em>reading</em> step.</p>
</blockquote>
<p>To plot the scatter figure as shown <a href="https://matplotlib.org/stable/tutorials/introductory/usage.html#types-of-inputs-to-plotting-functions">here</a>, we can prepare the data containing coordinates, colors and sizes (stored in <code>data/scatter.dat</code>):</p>
<pre><code># a(x) c(color) d(size) b(y)
0	49	134.685132	-2.961981
1	20	131.086051	4.801881
2	44	51.744207	-6.497267
3	20	1.665814	-11.207766
</code></pre>
<p>Those lines started with <code>#</code> are <em>comments</em> in gnuplot, and they are ignored in the input data and script file. And the following code (<code>scatter.gp</code>) can output the similar plot:</p>
<pre><code>unset key
set xlabel 'entry a'
set ylabel 'entry b'
set xrange [-5:55]

plot 'scatter.dat' using 1:4:($3/30.0):2 \
with points pt 22 ps variable lc variable
</code></pre>
<p>Note that the size (3rd column) generated is too large for gnuplot, so it is divided by 30. And we can add a backslash (<code>\</code>) to write the command in multiple lines. When using the keywords <code>pt</code> (short for <em>pointtype</em>), <code>ps</code> (short for <em>pointsize</em>), or <code>lc</code> (short for linecolor) in a plot
command, the additional keyword <code>variable</code> may be given instead of a number.
In this case the corresponding properties of each point are assigned by additional columns of input data.</p>
<img src="ch1/img/scatter.svg" width="80%" alt="scatter">
<h2 id="coding-styles"><a class="header" href="#coding-styles">Coding styles</a></h2>
<p>As for gnuplot, there is only one style: <em>command</em>. To create the simple plot:</p>
<pre><code>set title 'Simple Plot'
set xrange [0:2]
set xlabel 'x label'
set ylabel 'y label'
plot x t 'linear', x**2 t 'quadratic', x**3 t 'cubic'
</code></pre>
<img src="ch1/img/simple_plot.svg" width="80%" alt="simple plot">
<p>Again, the default style of gnuplot may be not what you want. Here are some instructions about how to output an image like the one as shown <a href="https://matplotlib.org/stable/tutorials/introductory/usage.html#coding-styles">here</a>:</p>
<ul>
<li>X ticks step 0.5: <code>set xtics 0,0.25,2</code></li>
<li>Y ticks step 2: <code>set ytics 0,2,8</code></li>
<li>X ticks label with two digits: <code>set format x '%.2f'</code></li>
<li>The position of legend: <code>set key box reverse Left left</code></li>
<li>The size ratio: <code>set size ratio 2.7/5</code></li>
</ul>
<p>Because gnuplot always plots according to <code>xrange</code> if possible, we have to use a small trick to make some blank space. The main idea is to return invalid value for those space:</p>
<pre><code>f(x) = (x &lt; 0 || x &gt; 2 ? 1/0 : x)
</code></pre>
<p>The final code (<code>simple_plot.pg</code>) would generate a figure like the following:</p>
<img src="ch1/img/simple_plot2.svg" alt="final simple plot">
<p>Wow, a ton of code is required to make the figure look pretty! The good news is that writing the scripts in gnuplot is like building with blocks, and everything here is straightforward; the bad news is that some default styles are a little annoying, and we have to <em>set</em> them manually.</p>
<p>From now on, I will not apply the trick to make extra space in the X axis, because in my opinion, this is just an implementation choice. By the way, the figures shown in Matplotlib manual are generally scaled to 2.7/5, and we don't set the size ratio manually. If you want to learn how to scale the figure properly, please refer to <a href="ch1/../cook/1_30.html">Cookbook: Item 1</a>.</p>
<h3 id="functions-and-styles"><a class="header" href="#functions-and-styles">Functions and styles</a></h3>
<p>Gnuplot is <em>NOT</em> a programming language, so you cannot make a <em>helper</em> function to lessen your repeated workload. Fortunately, gnuplot has several features which can simplify the script. On the other hand, gnuplot offers mathematical style function definitions. For example, we can define a Gauss function in gnuplot:</p>
<pre><code>gauss(x) = exp(-pi*x*x)
</code></pre>
<p>, where <code>exp</code> is the built-in logarithmic function and <code>pi</code> is the built-in constant for π.</p>
<p>On the other hand, gnuplot can levitate our labors by <em>setting styles</em>. For example, suppose the plots for \( x \) and \( x^2 \) has the same style, then we can define a common style for them:</p>
<pre><code>set style line 1 dt 2 lw 4 lc rgbcolor 'blue'
plot x ls 1,x**2 ls 1
</code></pre>
<p>The detail of the usage of <em>styles</em> can be found at <a href="ch1/basic_usage.html#styling-artists">Styling Artists</a>.</p>
<h2 id="styling-artists"><a class="header" href="#styling-artists">Styling Artists</a></h2>
<p>In the plot below we manually set the <em>linecolor</em>, <em>linewidth</em>, and <em>linetype</em> of a line.</p>
<blockquote>
<p>Experienced users of gnuplot like to use the abbreviations. For example, <code>lc</code> is short for <em>linecolor</em>, <code>lw</code> is short for <em>linewidth</em>, and <code>lt</code> is short of <em>linetype</em>. A complete list of the common used abbreviations can be found at <a href="ch1/../apdx/abbre.html">Appendix</a>.</p>
</blockquote>
<p>The data (<code>data/artists_data.data</code>) consists of two columns random numbers.</p>
<pre><code>set style line 1 dt 2 lw 4 lc rgbcolor 'blue'
set style line 2 dt 4 lw 2 lc rgbcolor 'orange'
plot 'artists_data.dat' using 1 smooth cumulative ls 1, \
'' using 2 smooth cumulative ls 2
</code></pre>
<img src="ch1/img/artists.svg" alt="styling artists" width="80%">
<p>Let me elaborate on the usage. The fist line <code>set style line &lt;index&gt; &lt;some properties&gt;</code>, where <em>index</em> can be referred later. So what does the number of each property mean? In gnuplot, each number has its unique meaning, and you can check it by invoking the <code>test</code> command:</p>
<img src="ch1/img/test.svg" alt="test">
<p>As we can see, <code>dt 2</code> is short for <code>dashtype 2</code>, where <em>2</em> means <em>---</em>; <code>lw 4</code> is short for <code>linewidth 4</code>; <code>lc</code> is short for <code>linecolor</code>. In the code above, we use <code>lc rgbcolor &quot;blue&quot;</code> to specify a color, and we can also use a magic number, saying, <code>lc 30</code>, where <em>30</em> also means <em>blue</em>. Please check the long list carefully on the right side as illustrated in the figure above.</p>
<p>The first parameter of <code>plot</code> is the file name, and <code>using 1</code> means selecting the first (<em>1st</em>) column. Generally speaking, when it comes to a 2D figure, we need to provide two columns, indicating X and Y respectively, and if only one column is given, then gnuplot considers it as Y, and X is implicit as the index number (starting from 0). To plot multiple lines, we separate them with a column (<em>,</em>), and we should not repeat the <code>plot</code> command again. We can specify the file name again, but it will be the previous one by default if it is an empty string (<em>&quot;&quot;</em> or <em>''</em>).</p>
<p>One more thing, the option <code>smooth cumulative</code> is used to achieve the same effect as <code>np.cumsum()</code> does.</p>
<h3 id="colors"><a class="header" href="#colors">Colors</a></h3>
<p>Gnuplot has a very flexible array of colors that are accepted for most Artists, and users have multiple ways (including a number, an RGB name, and RGB hex value) to specify the colors. Some Artists will take multiple colors. i.e. for a circle plot, the edge of the markers can be different colors from the interior:</p>
<pre><code>set style fill solid border lc 'black'
plot '../data/artists_data.dat' using 1:2 with circles fc &quot;greenyellow&quot;
</code></pre>
<img src="ch1/img/colors.svg" alt="colors" width="80%">
<p>The first line is to set the <em>fill style</em>, and 0.6 is the degree of transparency. Note that, <code>fc</code>, short for <em>fillcolor</em> only accepts a <em>colorspec</em>, and we cannot pass a plain number to it. You can check all color names by <code>show colornames</code> command.</p>
<h3 id="linewidths-linestyles-and-pointsizes"><a class="header" href="#linewidths-linestyles-and-pointsizes">Linewidths, linestyles, and pointsizes</a></h3>
<p>The line width and point size are multipliers for the current terminal's default width and size, so you'd better check the styles by invoking the <code>test</code> command. By the way, the concept of <code>MarkerStyle</code> in Matplotlib is called <em>pointtype</em> (the abbreviation form is <code>pt</code>) in gnuplot. For example, <code>pt 5</code> is a filled square.</p>
<pre><code>plot '../data/artists_data.dat' using 1 with points pt 5 ps 2 lc 7 t 'data 1', \
'' using 2 with points pt 11 ps 2 t 'data 2'
</code></pre>
<img src="ch1/img/marker.svg" alt="marker" width="80%">
<blockquote>
<p>There is no <em>pointcolor</em> in gnuplot! In order to set the color a point, you can use the <code>lc</code> (short for <em>linecolor</em>).</p>
</blockquote>
<h2 id="labelling-plots"><a class="header" href="#labelling-plots">Labelling plots</a></h2>
<h3 id="axes-labels-and-text"><a class="header" href="#axes-labels-and-text">Axes labels and text</a></h3>
<p><code>set xlabel</code>, <code>set ylabel</code>, and <code>set title</code> are used to add text in the indicated locations. Text can also be directly added to plots using <code>set label</code> command.</p>
<p>First, we prepare a normal distribution dataset (<code>data/normal.dat</code>) using the Python code:</p>
<pre><code class="language-python">mu, sigma = 115, 15
x = mu + sigma * np.random.randn(10000)
</code></pre>
<pre><code>set title &quot;Aardvark lengths\n (not really)&quot;
set xlabel 'Length [cm]'
set ylabel 'Probability'
set label &quot;{/Symbol m} = 115, {/Symbol s} = 15&quot; at 80,600
unset key
set xrange [55:175]
set grid
set style fill solid 0.75
plot 'normal.dat' using 1 bins=50 with boxes fc '#4070a0'
</code></pre>
<img src="ch1/img/labels.svg" alt="labels" width="80%">
<p>The complete code can be found at <code>labels.gp</code>. Note that you have to use double quotes for the escape character <code>\n</code>. The basic syntax of <code>set label</code> is: </p>
<pre><code>set label {&lt;tag&gt;} {&quot;&lt;label text&gt;&quot;} {at &lt;position&gt;}
</code></pre>
<p>Here, the <code>position</code> is the location of X and Y on the plot in terms of the coordinates. To display the mathematical symbols, we use the special <code>{/Symbol}</code> font, where <code>m</code>, short for Greek letter <code>mu</code>, is \(\mu\), and <code>s</code>, short for Greek letter <code>sigma</code>, is \(\sigma\). Readers can refer to <a href="ch1/../apdx/greek.html">Greek Letters</a> for a complete list.</p>
<p>We can further customize other properties such as <em>text size</em> and <em>text color</em>. For example, we use <code>font &quot;,15&quot;</code> to specify the size of font to 15 for the terminal.</p>
<h3 id="using-mathematical-expressions-in-text"><a class="header" href="#using-mathematical-expressions-in-text">Using mathematical expressions in text</a></h3>
<p>The <code>{/Symbol}</code> also supports simple mathematical notations, such as the subscript. For example <code>x^2</code> means \(x^2\), <code>{/Symbol s}_2</code> means \(\sigma_{2}\). However, it would be troublesome to write complex mathematical equations with <code>{/Symbol}</code>, and instead you should take the leverage of <em>Latex</em>. Readers can refer to <a href="ch1/../cook/1_30.html">How to write complex mathematical equations</a>.</p>
<h3 id="annotations"><a class="header" href="#annotations">Annotations</a></h3>
<p>We can also annotate points on a plot by using setting <em>arrow</em> and <em>label</em>:</p>
<pre><code>f(x) = cos(2*pi*x)
unset key
set xrange [0:5]
set yrange [-2:2]
set samples 1000
set arrow from 2.3,1.3 to 2,1 filled
set label 'local max' at 2.3,1.3
plot f(x)
</code></pre>
<img src="ch1/img/annotation.svg" alt="annotation" width="80%">
<p>The basic usage an <em>arrow</em> is <code>set arrow from &lt;position&gt; to &lt;position&gt;</code>, and gnuplot offers a large amount of options to customize its styles, such as its head, fill style, and border. For example, as for the fill style, you can use one from <code>filled | empty | nofilled | noborder</code>. Like the <em>label</em>, <code>position</code> here means the X,Y coordinate on the plot.</p>
<blockquote>
<p>Like many other Linux tools, gnuplot is shipped with a detailed documentation, and users can invoke <code>help &lt;command&gt;</code> to ask for help. For example, you can access gnuplot’s built-in reference documentation about how to set arrow by typing <code>help set arrow</code>.</p>
</blockquote>
<h3 id="keys"><a class="header" href="#keys">Keys</a></h3>
<p>The concept <em>legend</em> in Matplotlib is called <em>key</em> in gnuplot.</p>
<pre><code>plot 'artists_data.dat' using 1 with lines t 'data1', \
'' using 2 with lines t 'data2'
</code></pre>
<img src="ch1/img/key.svg" alt="key" width="80%">
<p>The keys are specified by <code>t</code> (short for <em>title</em>). Keys in gnuplot are quite flexible in layout and placement.</p>
<h2 id="axis-scales-and-ticks"><a class="header" href="#axis-scales-and-ticks">Axis scales and ticks</a></h2>
<p>Each Axes has two (or three) axis representing the x- and y-axis. These control the scale of the axis, the tick locators and the tick formatters.</p>
<h3 id="scale"><a class="header" href="#scale">Scale</a></h3>
<p>In addition to the linear scale, gnuplot supplies non-linear scales, such as a log-scale. Here we set the scale manually:</p>
<pre><code>set multiplot layout 1,2
unset key
f(x) = 10**x
unset logscale y
plot 'artists_data.dat' using (f($2)) with lines
set logscale y
plot 'artists_data.dat' using (f($2)) with lines
</code></pre>
<img src="ch1/img/scale.svg" alt="scale" width="70%">
<p>The first line is to set a multiplot mode with 1 row and 2 columns. Some readers may be not satisfied with formatting of labels in <code>log-scale</code>, and prefer the \( 10^i \) format. To achieve this, we can specify the format as <em>log</em>:</p>
<pre><code>set format y &quot;10^{%L}&quot;
</code></pre>
<p>The complete code can be found at <code>scales.gp</code>.</p>
<img src="ch1/img/scale2.svg" alt="scale2" width="70%">
<p>The scale sets the mapping from data values to spacing along the Axis, so it is also possible to set <em>log scale</em> for X.</p>
<h3 id="tick-locators-and-formatters"><a class="header" href="#tick-locators-and-formatters">Tick locators and formatters</a></h3>
<p>Each Axis has a tick locator and formatter that choose where along the Axis objects to put tick marks. A simple interface to this is <code>set xtics</code> (Of course, we can also use <code>set ytics</code> to custom the ticks of Y).</p>
<pre><code>set multiplot layout 2,1
unset key

set title 'Automatic ticks'
plot 'artists_data.dat' using 2 with lines

set title 'Manual ticks'
set ytics -1.5,1.5,1.5
set xtics (&quot;zero&quot; 0, &quot;30&quot; 30, &quot;sixty&quot; 60, &quot;90&quot; 90)
plot 'artists_data.dat' using 2 with lines
</code></pre>
<img src="ch1/img/ticks.svg" alt="ticks" width="80%">
<p>The code above shows two basic usages of <code>set xtics</code> (<code>set ytics</code>) command.</p>
<pre><code>set xtics &lt;start&gt;, &lt;incr&gt; {,&lt;end&gt;}
set xtics ({&quot;&lt;label&gt;&quot;} &lt;pos&gt; {&lt;level&gt;} {,{&quot;&lt;label&gt;&quot;}...)
</code></pre>
<p>So <code>set ytics -1.5,1.5,1.5</code> means the tic starts from -1.5, and ends to 1.5, and the step is 1.5 (always positive). As for the second usage, the default level is 0, indicting the major tick, and level 1 means the minor tick. So <code>&quot;zero&quot; 0</code> means to display <em>zero</em> at position 0.</p>
<p>By the way, the ticks in gnuplot are drawn <em>inwards</em>, and we can use <code>out</code> to set it be <em>outwards</em>.</p>
<pre><code>unset key
set tics out nomirror
plot 'artists_data.dat' using 2 with lines
</code></pre>
<img src="ch1/img/outwards.svg" alt="outwards" width="80%">
<p>As for <code>tics</code>, it's default option <code>mirror</code> tells gnuplot to put unlabeled tics at the same positions on the opposite border, and <code>nomirror</code> does what you think it does.</p>
<h3 id="plotting-dates-and-strings"><a class="header" href="#plotting-dates-and-strings">Plotting dates and strings</a></h3>
<p>Gnuplot can handle plotting arrays of dates and arrays of strings, as well as floating point numbers. These get special locators and formatters as appropriate. </p>
<p>For dates, gnuplot offers a set of command for processing <em>time series</em> data. The classic approach uses <code>set _data</code>, <code>set timefmt</code> and <code>set _tics format</code>, which let you parse and arbitrary data/time information. This is gnuplot’s most flexible and powerful method of handling timestamps.</p>
<p>The dataset can be found <code>data/date.dat</code>, which is generated by <code>numpy</code>.</p>
<pre><code>2021-11-15 00:00:00   0.047934
2021-11-15 01:00:00   0.811732
2021-11-15 02:00:00    2.66169
...
</code></pre>
<pre><code>unset key
set xdata time
set timefmt &quot;%Y-%m-%d %H:%M:%S&quot;
set xtics format &quot;%m-%d&quot;
plot &quot;date.dat&quot; u 1:3 w lines lw 1.5
</code></pre>
<img src="ch1/img/date.svg" alt="date" width="80%">
<p>The second line <code>set xdata time</code> is to set the data on X as <em>time</em>. The third line <code>set timefmt &lt;format string&gt;</code> is to specify the time format, where <code>%Y</code> means a 4-digit year, <code>%m</code> means month, <code>%d</code> means a day of a month, <code>%H</code> means an hour, <code>%M</code> means the minute. You can use <code>help set timefmt</code> to have a look at the document. The fourth line is to set the format of the tics on X, <code>%m-%d</code> means the month and day are displayed.</p>
<blockquote>
<p>Note that the supported format strings for <code>set timefmt</code> and <code>set xtics format</code> are not always the same. For example, <code>%F</code> is a shorthand for <code>%H:%M:%S</code>, and it is only available for <code>set _tics format</code>. Readers can refer to <a href="ch1/../apdx/time_format.html">Time Format</a> for details.</p>
</blockquote>
<p>For strings, we get categorical plotting. We prepared a dataset at <code>data/strings.dat</code>:</p>
<pre><code>turnips 0.4
rutabaga 0.42
cucumber 0.57
pumpkins 0.44
</code></pre>
<pre><code>unset key
set yrange [0:0.6]
set ytics 0,0.1,0.6
set xrange [-1:4]
set style fill solid 0.5
set boxwidth 0.8
plot &quot;strings.dat&quot; using 2:xticlabels(1) with boxes
</code></pre>
<img src="ch1/img/strings.svg" alt="strings" width="80%">
<p>Here we are using <code>boxes</code>, and it is also possible to plot this using histograms. But histograms are mainly used to plot multi-group data (see more at <a href="ch1/examples.html#revisit-bar-chart">Revisit bar chart</a>).</p>
<p>As for a 2D <em>box</em> plotting, only one dimension is required, and we can use an extra column to be the ticks labels. So <code>2:xticlabels(1)</code> means plotting with the second (2nd) column and its first (1st) column is used as ticks labels on X. By default, each box extends to touch the adjacent boxes (in other words, width is 1), and <code>set boxwidth</code> is to set its width.</p>
<h2 id="additional-axis-objects"><a class="header" href="#additional-axis-objects">Additional Axis objects</a></h2>
<p>Plotting data of different magnitude in one chart may require an additional y-axis. As for a 2D figure in gnuplot, we are, in fact, plotting on <em>X1</em> (bottom) and <em>Y1</em> (left). The mirror of X1 is <em>X2</em>, which is located on the top, and the mirror of Y1 is <em>Y2</em>, which is located on the right side. Therefore, each axis can have a different scale and tick format in gnuplot.</p>
<pre><code>f1(x) = 500 * x
f2(x) = cos(2 * pi * x)
set xrange [0:5]
set samples 1200
plot f2(x) w lines axis x1y1 lw 2 t 'Sine(left)', f1(x) w lines axis x1y2 lw 2 t 'Staight(right)'
</code></pre>
<img src="ch1/img/y_axis.svg" alt="y_axis" width="80%">
<p>Here <code>axis x1y1</code> means plotting on X1 and Y1, while <code>axis x1y2</code> means plotting on X1 and Y2. And we can also set the ticks labels on X2 via <code>set x2label</code>:</p>
<pre><code>f(x) = cos(2 * pi * x)
set link x2 via x*180/pi inverse x*pi/180
set x2tics 0,50,300
set xtics nomirror
set xrange [0:5]
set samples 1200
set xlabel 'Angle [°]'
set x2label 'Angle [rad]'
plot f(x) w lines axis x1y1 lw 2
</code></pre>
<img src="ch1/img/x_axis.svg" alt="x_axis" width="80%">
<p>Note that the <code>set link</code> command is introduced by gnuplot 5.0, which is used to establish a mapping between the x and x2 axes, or the y and y2 axes.</p>
<h2 id="color-mapped-data"><a class="header" href="#color-mapped-data">Color mapped data</a></h2>
<p>Often we would like a color map. Gnuplot has a number of plot types that do this. Since color maps are based on 3D data, we need to understand the 3D data format in gnuplot (see more at <a href="ch1/../apdx/3d.html">3D Data</a>). Here we use data (<code>data/z.txt</code>) which is generated by Python in the <em>matrix</em> format:</p>
<pre><code>unset key
set xrange [0:128]
set yrange [0:128]
set cbrange [-1:1]
set cbtics scale 0
set palette defined (-1 'blue', 0 'white', 1 'red')
set tics nomirror out
plot 'z.txt' matrix with image
</code></pre>
<img src="ch1/img/map1.svg" alt="map1" width="80%">
<p><em>Palettes</em> are very flexible in gnuplot, and you can refer to <a href="ch1/../apdx/palette.html">Palettes</a> for more details. Here we use <code>set palette defined</code> to define some colors at specific points; <code>set cbrange</code> (<em>cb</em> is short for <em>color range</em>) command sets the range of values which are colored using the current <code>palette</code>. The <code>set cbtics</code> command controls major (labeled) tics on the color box axis, and the option <code>scale 0</code> means no tics.</p>
<p>To draw a contour, we can use <code>set table</code> to output its contour (<code>cont.gp</code>):</p>
<pre><code>set contour base 
unset surface
set table 'cont.dat'
splot 'z.txt' matrix
</code></pre>
<p><code>splot</code> is the command for drawing 3D plots. Then e can draw the contour and the data at the same time:</p>
<pre><code>unset key
set xrange [0:128]
set yrange [0:128]
set cbrange [-1:1]
set cbtics scale 0
plot '../../data/z.txt' matrix with image, '../../data/cont.dat' with lines lw 1.5
</code></pre>
<img src="ch1/img/map2.svg" alt="map2" width="80%">
<p>Here, we use the default palette in gnuplot, and you can check how it looks like by invoking <code>test palette</code> command.</p>
<p>The last example is to plot a scatter with color:</p>
<pre><code>set palette defined ( 0 'blue', 1 'grey', 2 'red' )
plot &quot;cloud&quot; u 1:2:3 palette pt 7 ps 2
</code></pre>
<img src="ch1/img/scatter_color.svg" alt="scatter color" width="80%">
<p>As for <code>data/cloud</code>, its first two columns determine the location of each point, and the third column is used to find the point’s color by mapping the numeric value into the provided palette. The color of each point or line segment is found by mapping the values of an additional data column into the palette, using the keyword <code>palette</code> in the <code>plot</code> command.</p>
<h2 id="working-with-multiple-figures-and-axes"><a class="header" href="#working-with-multiple-figures-and-axes">Working with multiple Figures and Axes</a></h2>
<p>We have shown the usage of <code>set multiplot layout</code>, and we provide one more example (<code>multi.pg</code>), which is from <a href="http://gnuplot.sourceforge.net/demo/layout.html">gnuplot demo script: layout.dem</a>:</p>
<img src="ch1/img/multi.svg" alt="multi" width="80%">
<p>Note that for academical papers, multiple figures are mainly plotted with <em>subfigure</em> in <em>Latex</em>, so we do not think it is worthwhile to explore this feature in gnuplot.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="more-tutorials"><a class="header" href="#more-tutorials">More Tutorials</a></h1>
<p>Matplotlib provides both the <code>pyplot</code> API and the object-oriented API, but gnuplot only offers <em>command</em> style, which is more like the <code>pyplot</code> API of Matplotlib. So, generally, this article has no much difference with <a href="ch1/basic_usage.html">Basic Usage</a>, and I only show some script to plot these figures shown in <a href="https://matplotlib.org/stable/tutorials/introductory/pyplot.html">Pyplot tutorial</a>. </p>
<p>Readers can skip most content of this section and jump to <a href="ch1/tutorials.html#save-plot">Save plot</a> directly if they have already understood <a href="ch1/basic_usage.html">Basic Usage</a> because most of the usages and concepts are repeated.</p>
<blockquote>
<p>The script in this section can be found <code>script/tutorials</code>.</p>
</blockquote>
<h2 id="intro-to-plot"><a class="header" href="#intro-to-plot">Intro to plot</a></h2>
<p><code>plot</code> is the most important command in gnuplot.</p>
<pre><code>$y &lt;&lt; EOD
1
2
3
4
EOD
set ylabel 'some numbers'
plot $y with lines
</code></pre>
<img src="ch1/img/2line.svg" alt="2-line" width="80%">
<p>You may be wondering why the x-axis ranges from 0-3 and the y-axis from 1-4. If you only provide one column for <code>plot</code>, gnuplot assumes it is a sequence of y values, automatically generates the x values (starting from 0) for you.</p>
<blockquote>
</blockquote>
<p>To plot x versus y, you can write:</p>
<pre><code>$data &lt;&lt; EOD
1 1
2 4 
3 9
4 16
EOD
plot $data u 1:2 w l
</code></pre>
<img src="ch1/img/2linexy.svg" alt="2-line-xy" width="80%">
<p>Note that we are using the abbreviations:</p>
<ul>
<li><code>u</code>: using</li>
<li><code>w</code>: with</li>
<li><code>l</code>: lines</li>
</ul>
<h3 id="formatting-the-style-of-your-plot"><a class="header" href="#formatting-the-style-of-your-plot">Formatting the style of your plot</a></h3>
<p>It is very flexible to set the color and line type of the plot.</p>
<pre><code>$data &lt;&lt; EOD
1 1
2 4 
3 9
4 16
EOD
unset key
set xrange [0:6]
set yrange [0:20]
set xtics 0,1,6
set ytics 0,2.5,20
set format y &quot;%.1f&quot;
plot $data u 1:2 w p pt 7 lc 'red' ps 2
</code></pre>
<img src="ch1/img/2pointxy.svg" alt="2-point-xy" width="80%">
<p>Here we specify the <code>lt</code> (<em>linetype</em>), <code>pt</code> (<em>pointtype</em>), <code>lc</code> (<em>linecolor</em>) and <code>ps</code> (<em>pointsize</em>). And we also set the ranges and tics for X and Y.</p>
<p>The example below illustrates plotting several lines with different format styles:</p>
<pre><code>unset key
set xrange [0:5]
set samples 25
set yrange [-1:120]
set ytics 0,25
plot x w l dt 2 lw 3 lc 'red', \
x**2 w p pt 5 ps 1.5 lc 'blue', \
x**3 w p pt 9 ps 2 lc '#008000'
</code></pre>
<img src="ch1/img/2linestyle.svg" alt="2-line-style" width="80%">
<h2 id="plotting-with-keyword-strings"><a class="header" href="#plotting-with-keyword-strings">Plotting with keyword strings</a></h2>
<p>Gnuplot does not support such feature, but readers can refer to <a href="ch1/basic_usage.html#types-of-inputs-to-plotting-functions">Types of inputs to plotting functions</a> to learn how to plot the scatter with varying sizes and colors.</p>
<img src="ch1/img/2scatter.svg" width="80%" alt="2-scatter">
<p>As we can see, we can specify the column using <code>$i</code> for <code>plot</code>, and this feature is like <em>keyword strings</em> in Matplotlib.</p>
<h2 id="plotting-with-categorical-variables"><a class="header" href="#plotting-with-categorical-variables">Plotting with categorical variables</a></h2>
<pre><code>set terminal qt size 900,300 font ',10'
set multiplot layout 1,3 title 'Categorical Plotting' font ',14'
unset key
set xrange [-1:3]
set yrange [0:110]
set xtics ('group\\\_a' 0, 'group\\\_b' 1, 'group\\\_c' 2)
set tics nomirror out
$y &lt;&lt; EOD
1
10
100
EOD
set style fill solid
set boxwidth 0.8
plot $y with boxes

plot $y with points pt 7 ps 2

plot $y with lines lw 2

unset multiplot
</code></pre>
<img src="ch1/img/2categorical.svg" alt="2-categorical">
<p>Note that the <em>qt</em> terminal is in <em>enhanced text</em> mode, so we need to add extra <code>\\\</code> to display the underscore. Another solution is to set <em>noenhanced</em>.</p>
<h2 id="controlling-line-properties"><a class="header" href="#controlling-line-properties">Controlling line properties</a></h2>
<p>Lines have many attributes that you can set: linewidth, dash style, antialiased, etc:</p>
<pre><code>set linetype 1 lc rgb &quot;dark-violet&quot; lw 2 
</code></pre>
<h2 id="working-with-multiple-figures-and-axes-1"><a class="header" href="#working-with-multiple-figures-and-axes-1">Working with multiple figures and axes</a></h2>
<pre><code>set multiplot layout 2,1
unset key
set linetype 1 lc &quot;black&quot; lw 2
set linetype 2 lc rgb '#E41A1C' dt 2 lw 2 # red
f(x) = exp(-x) * cos(2*pi*x)
plot 't1.dat' using 1:(f($1)) with points pt 7 ps 1.5 lc 'blue', f(x) with lines ls 1

g(x) = cos(2*pi*x)
plot [0:5][] g(x) with lines ls 2
</code></pre>
<img src="ch1/img/2multi.svg" alt="2-multi" width="80%">
<h2 id="working-with-text"><a class="header" href="#working-with-text">Working with text</a></h2>
<pre><code>set terminal qt font ',16'
set title &quot;Histogra of IQ&quot;
set xlabel 'Smarts'
set ylabel 'Probability'
set label '{/Symbol m} = 100, {/Symbol s} = 15' at 60,600
unset key
set xrange [40:160]
set grid
set style fill solid 0.75
bin(x,s)  = s*floor(x/s)
binc(x,s) = s*(floor(x/s)+0.5)
set boxwidth 120/50.
stats 'smart.dat' u 1 noout
plot 'smart.dat' using (binc($1,120/50.)):(1./(120/50.*STATS_records)) smooth frequency with boxes fc '#4DAF4A'
</code></pre>
<img src="ch1/img/2smart.svg" alt="2-smart" width="80%">
<p>The script (<code>smart.gp</code>) uses a trick to compute the probability, because it would display frequency for given <em>bins</em>.</p>
<h2 id="horizontal-bar"><a class="header" href="#horizontal-bar">Horizontal bar</a></h2>
<p>In gnuplot, there is no delicate way to draw a horizontal bar directly, and you have to use <code>boxxyerror</code> to achieve the similar effect, while it can be done easily with the <code>barh</code> function in Matplotlib. In what follows, we are going to plot the figure in <a href="https://matplotlib.org/stable/tutorials/introductory/lifecycle.html">The Lifecycle of a Plot</a>. This subsection is adapted from <a href="https://stackoverflow.com/questions/62848395/">Horizontal bar chart in gnuplot</a>.</p>
<pre><code>set yrange [0:*]
set style fill solid
unset key
myBoxWidth = 0.8
set offsets 0,0,0.5-myBoxWidth/2.,0.5

plot $data using 2:0:(0):2:($0-myBoxWidth/2.):($0+myBoxWidth/2.):($0+1):ytic(1) \
with boxxyerror lc var
</code></pre>
<img src="ch1/img/barh_png.png" alt="2-barh" width="80%">
<p>The complete script can be found at <code>barh.gp</code>.</p>
<h2 id="save-plot"><a class="header" href="#save-plot">Save plot</a></h2>
<p>Gnuplot provides a variety of formats for outputs by setting its <code>terminal</code><sup class="footnote-reference"><a href="#terminal">1</a></sup>. In practice, we would like to run a script and output the figure in a batch mode.</p>
<pre><code>$ gnuplot foo.gp
</code></pre>
<h3 id="png"><a class="header" href="#png">PNG</a></h3>
<pre><code>set terminal pngcairo size 1600,1200 enhanced font 'Verdana,16'
set output 'barh_png.png'
</code></pre>
<p>The complete script can be found at <code>barh_png.gp</code>. Here we set the terminal to <code>pngcairo</code>, and then specify its size in pixels and its font type and font size. You can check the documentation by typing <code>help set terminal pngcairo</code>. For example, the <code>transparent</code> option would make output figure <em>transparent</em>.</p>
<pre><code>set terminal pngcairo transparent size 1600,1200 enhanced font 'Verdana,16'
</code></pre>
<h3 id="eps"><a class="header" href="#eps">EPS</a></h3>
<pre><code>set terminal postscript eps size 10,8 enhanced color font 'Helvetica,18'
set output 'barh_eps.eps'
</code></pre>
<p>The complete script can be found at <code>barh_eps.gp</code>. Here we set the terminal to <code>postscript</code> with <code>eps</code> option. Note that the unit of size is <em>inch</em> by default.</p>
<h3 id="pdf"><a class="header" href="#pdf">PDF</a></h3>
<pre><code>set terminal pdfcairo size 10,8 enhanced font 'Verdana,24' rounded
set output 'barh_pdf.pdf'
</code></pre>
<p>The complete script can be found at <code>barh_pdf.gp</code>. Here we set the terminal to <code>pdfcairo</code>. Note that the unit of size is <em>inch</em> by default.</p>
<blockquote>
<p>The <code>pdf</code> terminal is deprecated.</p>
</blockquote>
<h3 id="svg"><a class="header" href="#svg">SVG</a></h3>
<pre><code>set terminal svg size 1600,1200 enhanced font 'Helvetica,18'
set output 'barh_svg.svg'
</code></pre>
<p>The complete script can be found at <code>barh_svg.gp</code>. Here we set the terminal to <code>svg</code>. </p>
<p>And we can also output <code>.tex</code> by <em>epslatex</em> terminal. See more at <a href="ch1/../cook/1_30.html#2-how-to-write-complex-mathematical-expressions">How to write complex mathematical expressions</a>.</p>
<p><sup class="footnote-reference"><a href="#terminal">1</a></sup> Reader can refer to <a href="http://www.bersch.net/gnuplot-doc/complete-list-of-terminals.html">Complete list of terminals</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="more-examples"><a class="header" href="#more-examples">More Examples</a></h1>
<p>In this section, we show more example in gnuplot.</p>
<blockquote>
<p>The script in this section can be found <code>script/examples</code>.</p>
</blockquote>
<h2 id="basic-area-chart"><a class="header" href="#basic-area-chart">Basic area chart</a></h2>
<pre><code>set style fill solid 0.4 noborder
plot $data with filledcurves y=0 lc rgb &quot;forest-green&quot;
</code></pre>
<p>The key point of the code (<code>area_chart.gp</code>) is <code>with filledcurves y=0</code>, because we would like to set a line at <code>y=0</code> (it is also fine to use <code>y1=0</code>).</p>
<img src="ch1/img/area_chart.png" alt="area chart" width="80%">
<p>In addition, if the plot target is a function, the following code is also feasible:</p>
<pre><code>set style fill solid 0.4 noborder
set style function filledcurves y=0
set xrange [0:3]
plot sin(x) lc rgb &quot;forest-green&quot;
</code></pre>
<p>The code above (<code>area_chart2.gp</code>) uses something new: <code>set style function</code> which changes the default plotting style for function plots</p>
<img src="ch1/img/area_chart2.png" alt="area chart2" width="80%">
<h2 id="stacked-area-chart"><a class="header" href="#stacked-area-chart">Stacked area chart</a></h2>
<p>As for a stacked area chart, the code has no much difference (<code>stacked_area.pg</code>):</p>
<pre><code>set style fill transparent solid 0.5 noborder
plot $data u 1 with filledcurves y=0, \
$data u 2 with filledcurves y=0, \
$data u 3 with filledcurves y=0
</code></pre>
<img src="ch1/img/stacked_area.png" alt="stacked area" width="80%">
<h2 id="revisit-bar-chart"><a class="header" href="#revisit-bar-chart">Revisit bar chart</a></h2>
<p>We have already shown how to use <code>with boxes</code> to plot categorical items in <a href="ch1/basic_usage.html#plotting-dates-and-strings">Plotting dates and strings</a>, but for multi groups, a <em>histogram</em> is preferred. In the following, we use the provided <code>energy</code> file. This part is adapted from <em>gnuplot 5</em> by Lee Phillips.</p>
<pre><code># Country Fossil Hydro Nuclear &quot;Other renewable&quot;
Mexico  72  18  3   7
US  71  9   8   12
...
</code></pre>
<p>Note that the specific value shown above are <em>factitious</em>.</p>
<pre><code>set style data histogram
set style fill solid border -1
plot &quot;energy&quot; u 2 title &quot;Fossil&quot;, \
&quot;&quot; u 3 title &quot;Hydro&quot;, \
&quot;&quot; u 4 title &quot;Nuclear&quot;, \
&quot;&quot; u 5:xtic(1) title &quot;Other renewable&quot;
</code></pre>
<img src="ch1/img/energy.png" alt="energy" width="80%">
<p>The complete code can be found at <code>energy.gp</code>. Gnuplot uses the &quot;histogram&quot; style for bar charts as well as true histograms. Because the country names (column 1) are expected to be labels on X, we use <code>xtic</code> (short for <em>xticlabels</em>) command to select the 1st column.</p>
<p>By the way, we can use <code>set style histogram cluster gap &lt;n&gt;</code> to set the gap between clusters. The default gap is 2. The following <em>gap</em> is 1, and as you can see, it has a slightly wider box.</p>
<img src="ch1/img/energy2.png" alt="energy2" width="80%"><div style="break-before: page; page-break-before: always;"></div><h1 id="cookbook"><a class="header" href="#cookbook">Cookbook</a></h1>
<p>&quot;How-do-do&quot; style cookbook for gnuplot. Note that each item has no particular order.</p>
<blockquote>
<p>All scripts in this article can be found <code>script/cook</code>.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="item-1-30"><a class="header" href="#item-1-30">Item 1-30</a></h1>
<h2 id="1-how-to-resize-the-figure"><a class="header" href="#1-how-to-resize-the-figure">1. How to resize the figure</a></h2>
<p>Command <code>set size ratio</code> can set the radio of height/width. However, this won't affect the size of figure itself, and it will only change the ratio the plotting area. To remove the extra space, we can use <code>size &lt;width&gt;, &lt;height&gt;</code> when <code>set terminal</code>.</p>
<blockquote>
<p>Note that the <code>size</code> has different meanings for different <code>terminal</code>. See more at <a href="cook/../ch1/tutorials.html#save-plot">Save plot</a>.</p>
</blockquote>
<p>For example, the following code is used to plot the time series data like <a href="cook/../ch1/basic_usage.html#plotting-dates-and-strings">Plotting dates and strings</a>:</p>
<pre><code>set terminal pngcairo transparent size 1000,540 enhanced font 'Verdana,16'
set output 'date.png'
unset key
set xdata time
set timefmt &quot;%Y-%m-%d %H:%M:00&quot;
set xtics format &quot;%m-%d&quot;
plot &quot;date.dat&quot; u 1:3 w lines lw 1.5
</code></pre>
<img src="cook/img/date.png" alt="date">
<h2 id="2-how-to-write-complex-mathematical-expressions"><a class="header" href="#2-how-to-write-complex-mathematical-expressions">2. How to write complex mathematical expressions</a></h2>
<p>We can set <em>Latex</em> as the output in gnuplot, and thus this feature makes it very convenient to write complex mathematical expressions.</p>
<pre><code>set term epslatex standalone color
set samples 1000
set output 'example.tex'
plot sin(x) title '$\sigma \frac{3}{4}$'
</code></pre>
<p>The code can be found at <code>math.gp</code>. Here, we set the <code>term</code> (short for <em>terminal</em>) as <code>epslatex</code>, and the remaining options:</p>
<ul>
<li><code>standalone</code>: The output is a standalone <em>.tex</em> file. Otherwise, we can only include the output in another <em>Latex</em> file.</li>
<li><code>color</code>: As the name implies, the output will always be colorful. Otherwise, some lines may be in monochrome mode.</li>
</ul>
<p>The third line is to specify the output file. In fact, another <em>.eps</em> file will also be generated (you do not have to specify its name), where <em>.tex</em> manages the mathematical expression, and <em>.eps</em> accounts for the plotting itself. We can run this script by <code>gnuplot math.gp</code> in the shell:</p>
<pre><code class="language-sh">$ gunplot math.gp
$ ls
$ example-inc.eps  example.tex  math.gp
</code></pre>
<p>After that, we can compile it to <a href="cook/img/math.pdf">PDF</a> via <em>Latex</em>.</p>
<p>I also wrote a helper script (<code>tex2eps.sh</code>) to generate a standalone <em>.eps</em> figure from <em>.tex</em>. Suppose there are <code>example-inc.eps</code> and <code>example.tex</code> in the current folder.</p>
<pre><code class="language-sh">$ ./tex2eps.sh example.tex
</code></pre>
<p>Then it would generate a standalone <em>.eps</em> file containing both plot itself and mathematical expressions.</p>
<h2 id="3-how-to-reuse-gnuplots-styles"><a class="header" href="#3-how-to-reuse-gnuplots-styles">3. How to reuse gnuplot's styles</a></h2>
<p>This article is adapted from <a href="https://stackoverflow.com/questions/41602351">How to make gnuplot charts look more visually appealing?</a>. As we have already seen, the default style of gnuplot is not appealing enough, and we often need custom configs, such as <code>lw</code> (<em>linewidth</em>). Readers can refer to <a href="https://github.com/Gnuplotting/gnuplot-palettes">gnuplot-palettes</a> for more useful resources.</p>
<p>Some people may would like to a standalone script. They may collect some fancy <em>styles</em>, and copy these styles into their current working script.</p>
<pre><code># define axis
# remove border on top and right and set color to gray
set style line 11 lc rgb '#808080' lt 1
set border 3 back ls 11
set tics nomirror
# define grid
set style line 12 lc rgb '#808080' lt 0 lw 1
set grid back ls 12

# color definitions
set style line 1 lc rgb '#8b1a0e' pt 1 ps 1 lt 1 lw 2 # --- red
set style line 2 lc rgb '#5e9c36' pt 6 ps 1 lt 1 lw 2 # --- green
</code></pre>
<p>The complete script can be found at <code>fancy.gp</code>.</p>
<img src="cook/img/fancy.svg" alt="fancy">
<p>You can also store these styles in an external file. Here we prepare another <code>style</code> file which configs the <em>line</em>, <em>border</em>, <em>ticks</em>, <em>border</em> and <em>grid</em>, and then we can load it in our script:</p>
<pre><code>load &quot;style&quot;
set terminal qt font &quot;Alegreya, 14&quot; size 800, 580

set xlabel &quot;x&quot;
set ylabel &quot;f(x)&quot;
set grid
set key right top
set xrange[0:6.28]
set yrange[-1:1]

plot sin(x) w l ls 1, cos(x) w l ls 2
</code></pre>
<img src="cook/img/sinx.svg" alt="sinx">
<blockquote>
<p>The same technology is also used in <a href="cook/../apdx/palette.html#loading-palettepalette">Loading palette</a>.</p>
</blockquote>
<p>By the way, one can also rename <code>style</code> to <code>.gnuplot</code> and put it in her home directory (it works on Linux and macOS). Then gnuplot would automatically load this file.</p>
<h2 id="4-how-to-plot-stacked-bar-charts"><a class="header" href="#4-how-to-plot-stacked-bar-charts">4. How to plot stacked bar charts</a></h2>
<p>We reuse the example in <a href="cook/../ch1/examples.html#revisit-bar-chart">Revisit bar chart</a>, and try to plot it as a stacked bar.</p>
<pre><code>set style data histogram
set style histogram rowstacked
set boxwidth 0.8 relative
</code></pre>
<img src="cook/img/stacked.png" alt="stack">
<p>In the code (<code>stacked.gp</code>), we use <code>set style histogram rowstacked</code> to set the histogram <em>rowstacked</em>, and the default style corresponds to <code>set style histogram clustered gap 2</code>. </p>
<p>Note that to make some space between boxes, we use the syntax <code>set boxwidth {&lt;width&gt;} {absolute|relative}</code>. By default, adjacent boxes are extended in width until they touch each other. <code>Relative</code> widths are interpreted as being a fraction of this default width, and this option is widely used.</p>
<h2 id="5-how-to-plot-horizontal-bar-charts"><a class="header" href="#5-how-to-plot-horizontal-bar-charts">5. How to plot horizontal bar charts</a></h2>
<p>As we mentioned in <a href="cook/../ch1/tutorials.html#horizontal-bar">Horizontal bar</a>, we can use <code>boxxyerror</code> to plot a horizontal bar. Here we use another trick: <em>by rotating</em> (<code>hbar.gp</code>).</p>
<pre><code>set bmargin 4
set tmargin 2
set style fill solid border -1
set boxwidth 0.8
set y2range [0:*]
set y2tics
set xtics offset 0,-0.5 right
set xtics rotate by 90
set y2tics rotate by 90
set y2tics offset 0,-1
</code></pre>
<p>And we also have to rotate the output by hand.</p>
<img src="cook/img/hbar.png" alt="hbar" width="50%">
<p>It is a bit complicated. So I still recommend the method introduced in <a href="cook/../ch1/tutorials.html#horizontal-bar">Horizontal bar</a>.</p>
<h2 id="6-how-to-customize-borders"><a class="header" href="#6-how-to-customize-borders">6. How to customize borders?</a></h2>
<p>Sometimes, we may like to keep the X1 (bottom) and Y1 (left) only. We add the code in the following into <code>stacked.gp</code>:</p>
<pre><code>set border 3
</code></pre>
<img src="cook/img/stacked2.png" alt="stack2">
<p>As shown in <a href="cook/1_30.html#3-how-to-reuse-gnuplots-styles">How to reuse gnuplot styles</a>, it is also possible to set borders' other properties, such as <em>linetype</em>, <em>linecolor</em>, and <em>linewidth</em>. In 2D plots the border is normally drawn on top of all plots elements (<code>front</code>). If you want the border to be drawn behind the plot elements, use <code>set border back</code>. Then, what does <em>3</em> mean here? The borders are encoded in a 12-bit integer: the four low bits control the border for <code>plot</code>:</p>
<ul>
<li>1: bottom</li>
<li>2: left</li>
<li>4: top</li>
<li>8: right</li>
</ul>
<p>Therefore, <em>3</em> is the sum of 1 and 2, indicting <em>bottom</em> and <em>left</em>, respectively.</p>
<h2 id="7-how-to-customize-keys"><a class="header" href="#7-how-to-customize-keys">7. How to customize keys?</a></h2>
<p>Most of the time, we use <code>unset key</code> to <em>not</em> show the key in previous examples. In this item, we discuss how to customize <em>key</em>. Readers can type <code>help set key</code> for details.</p>
<p>First, as for the position, you can choose <code>{left | right | center} {top | bottom | center}</code> (default is <code>right top</code>). Secondly, as for how they are arranged, you can choose <code>{vertical | horizontal}</code> (default is <code>vertical</code>). Sometimes, we would like to add a <em>box</em> using <code>box</code> option.</p>
<pre><code>set key top left box
set xrange [0:1]
plot x ls 1 t 'x', x**2 ls 2 t 'x^2', x**3 ls 3 t 'x^3'
</code></pre>
<img src="cook/img/key.png" alt="key">
<p>The previous example looked a bit crowded inside its box. We can add to the width and height of the box by adding some keywords to the command:</p>
<pre><code>set key top left box width 1 height 1
</code></pre>
<p>One problem with the key in all the previous examples was that the default length of line used was not long enough to make clear which dash pattern was intended. This can be adjusted by <code>samplen</code>:</p>
<pre><code>set key top left box width 1 height 1 samplen 12
</code></pre>
<p>If you prefer the names to come after the curve samples, use the keyword <code>reverse</code>; this goes well with the <code>Left</code> keyword, which justifies the text to the left:</p>
<pre><code>set key top left box width 1 height 1 reverse Left samplen 10
</code></pre>
<img src="cook/img/key2.png" alt="key2">
<p>If the number of keys is growing, you can use <code>maxrow</code> keyword to control the maximum amount of rows.</p>
<h2 id="8-how-to-specify-color-schemes"><a class="header" href="#8-how-to-specify-color-schemes">8. How to specify color schemes?</a></h2>
<p>This item, in fact, is a specific topic of <a href="cook/1_30.html#3-how-to-reuse-gnuplots-styles">How to reuse gnuplot's styles</a>, and here, we focus on <em>color schemes</em>. Readers can refer to <a href="https://personal.sron.nl/%7Epault/">Paul Tol's Notes</a> and <a href="https://stats.stackexchange.com/questions/118033/">&quot;Best&quot; series of colors to use for differentiating series in publication-quality</a> for more background knowledge. Color schemes are also discussed in <a href="cook/../fundamental/color.html">Chapter 3</a>.</p>
<blockquote>
<p>This item is adapted from <a href="http://www.gnuplotting.org/color-maps-from-colorbrewer/">Color maps from colorbrewer</a>.</p>
</blockquote>
<p>If you are looking for nice color maps which are especially prepared to work with cartographic like plots you should have a look at colorbrewer2.org. Thanks to Anna Schneider there is an easy way to include them (at least the ones with eight colors each) into gnuplot. Just go to her <a href="https://github.com/aschn/gnuplot-colorbrewer">gnuplot-colorbrewer</a> github site and download the color maps.</p>
<p><a href="https://juliagraphics.github.io/ColorSchemes.jl/stable/catalogue/">This website</a> provides a complete nice color scheme catalogue, and we can reuse them easily. For example, in order to use the <a href="https://jfly.uni-koeln.de/color/#pallet">colorblind palette</a> by Masataka Okabe and Kei Ito, I prepared a style file <code>okabe_ito.plt</code> (<code>color.gp</code>).</p>
<pre><code>load 'obake_ito.plt'
plot for [ii=1:8] f(x,ii) ls ii lw 2
</code></pre>
<img src="cook/img/color.svg" width="60%">
<h2 id="9-how-to-plot-discrete-function"><a class="header" href="#9-how-to-plot-discrete-function">9. How to plot discrete function?</a></h2>
<p>Since gnuplot is Not a programming language, it lacks many useful features found in Python/R/Matlab. For example, to plot the histogram of flipping a coin until we see a head, the following code is written with Matplotlib:</p>
<pre><code class="language-python">import numpy as np
import matplotlib.pyplot as plt
p = 1/2
n = np.arange(1,11)
X = np.power(p,n)
plt.bar(n,X)
</code></pre>
<img src="cook/img/discrete.svg" width="80%">
<p>When it comes to gnuplot, we can resort to <code>for</code> manually to plot a discrete function:</p>
<pre><code>f(x) = 0.5**x
array A[10]
do for [i=1:10] {
    A[i] = f(i)
}
plot A using 1:2 with boxes
</code></pre>
<p>The complete code can be found at <code>discrete.gp</code>. As for <em>array</em> in gnuplot,</p>
<blockquote>
<p>The name of an array can be used in a <code>plot</code>. This is equivalent to providing a file in which column 1 holds the array index (from 1 to size), column 2 holds the value of real(A[i]) and column 3 holds the value of imag(A[i]).</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="fundamentals-of-data-visualization"><a class="header" href="#fundamentals-of-data-visualization">Fundamentals of Data Visualization</a></h1>
<p>In this chapter, I will replot all figures shown in <a href="https://clauswilke.com/dataviz/index.html">Fundamentals of Data Visualization</a>.</p>
<blockquote>
<p>Tutorials for plotting software typically focus on how to achieve specific visual effects rather than explaining why certain choices are preferred and others not.</p>
</blockquote>
<p>Also, I would also share my understandings when reading this book. Quoted from the author of Tikz, </p>
<blockquote>
<p>The only mistakes in typography are things done in ignorance.</p>
</blockquote>
<p>I think it also holds true in plotting.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="introduction-1"><a class="header" href="#introduction-1">Introduction</a></h1>
<p>A data visualization first and foremost has to accurately convey the data. It must not mislead or distort. If one number is twice as large as another, but in the visualization they look to be about the same, then the visualization is wrong. At the same time, a data visualization should be aesthetically pleasing.</p>
<p>For example, 3D plotting is often considered as a bad choice because it may distort the data.</p>
<p><img src="https://tikz.dev/pgfmanual-images/image-139.png" alt="example" /></p>
<p>This figure above is from <a href="https://tikz.dev/guidelines">Guidelines on Graphics</a>. As we can see, the relative sizes in a 3D-pie-chart are very strongly distorted.</p>
<h2 id="ugly-bad-and-wrong-figures"><a class="header" href="#ugly-bad-and-wrong-figures">Ugly, bad, and wrong figures</a></h2>
<img src="fundamental/img/intro.png" width="60%">
<p>To generate a reasonable visualization with no major flaws:</p>
<pre><code>$data &lt;&lt; EOD
A 3
B 5
C 4
EOD
unset key
set border 3
set tics out nomirror
set style data histogram
set grid
set style fill solid 0.9
set yrange [0:5]
set ylabel 'Value'
set boxwidth 0.8
plot $data u 2:xtic(1) with boxes fc '#56B4E9'
</code></pre>
<p>The default background grid line is good enough, so I did not specify its style. By the way, luckily I think it would be in fact hard to plot such <em>bad</em>, <em>ugly</em>, and <em>wrong</em> figures given the default settings with gnuplot.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="visualizing-data-mapping-data-onto-aesthetics"><a class="header" href="#visualizing-data-mapping-data-onto-aesthetics">Visualizing data: Mapping data onto aesthetics</a></h1>
<h2 id="aesthetics-and-types-of-data"><a class="header" href="#aesthetics-and-types-of-data">Aesthetics and types of data</a></h2>
<p>Readers can refer to the following figure to understand the basic graphical elements in gnuplot: <em>position, shape, size, color, line width, line type</em> (<code>aesthetics.gp</code>). And readers can refer to <a href="fundamental/../ch1/img/test.svg">test.svg</a> for more information.</p>
<img src="fundamental/img/aesthetics.svg" width="80%">
<blockquote>
<p>In gnuplot, the line type is called <code>dt</code> (short for <em>dash type</em>).</p>
</blockquote>
<p>If we would like to plot a figure whose X and Y are crossed at (0, 0), we can use the code (<code>zeroaxis.gp</code>):</p>
<pre><code>unset key
unset border
unset xtics
unset ytics
set zeroaxis lt -1 lw 2
set arrow 1 from 1,0 to 2,0 nofilled size 0.1,45,60 lw 2
set arrow 2 from 0,1 to 0,2 nofilled size 0.1,45,60 lw 2
set label 1 &quot;x&quot; at 1.9,-0.2 font ',40'
set label 2 &quot;y&quot; at -0.2,2 font ',40'
plot [-2:2][-2:2] 5
</code></pre>
<img src="fundamental/img/zeroaxis.png" width="80%">
<p>Here we use <code>set zeroaxis</code> to achieve this.</p>
<h2 id="scales-map-data-values-onto-aesthetics"><a class="header" href="#scales-map-data-values-onto-aesthetics">Scales map data values onto aesthetics</a></h2>
<p>A <em>scale</em> defines a unique mapping between data and aesthetics. Importantly, a scale must be one-to-one, such that for each specific data value there is exactly one aesthetics value and vice versa (<code>scales.gp</code>).</p>
<img src="fundamental/img/scales.svg" width="80%">
<p>Let’s put things into practice. We prepared the monthly precipitation data from NOAA, and use <code>smooth sbezier</code> option to make it smooth. Here we map precipitation onto the y axis, month onto the x axis, location onto color, and visualize these aesthetics with solid lines.</p>
<img src="fundamental/img/precip.svg" width="80%">
<pre><code>set datafile separator &quot;,&quot;
set xdata time
set timefmt &quot;%m&quot;
set xtics format &quot;%b&quot;
unset mxtics
plot 'city.csv' u 2:3 smooth sbezier lw 3, \
'city2.csv' u 2:3 smooth sbezier lw 3, \
'city3.csv' u 2:3 smooth sbezier lw 3, 
</code></pre>
<p>The complete code can be found at <code>precip.gp</code>. </p>
<p>Because now the key variable of interest (precipitation) is shown as color, we need to show sufficiently large colored areas for the color to convey useful information. Therefore, for this visualization I have chosen squares instead of lines, one for each month and location, and I have colored them by the precipitation for each month (<code>precip2.gp</code>):</p>
<img src="fundamental/img/precip2.svg"><div style="break-before: page; page-break-before: always;"></div><h1 id="coordinate-systems-and-axes"><a class="header" href="#coordinate-systems-and-axes">Coordinate systems and axes</a></h1>
<p>For regular 2d visualizations, two numbers are required to uniquely specify a point, and therefore we need two position scales. These two scales are usually but not necessarily the x and y axis of the plot. </p>
<h2 id="cartesian-coordinates"><a class="header" href="#cartesian-coordinates">Cartesian coordinates</a></h2>
<p>The following is a standard cartesian coordinate system (<code>coor.gp</code>):</p>
<img src="fundamental/img/coor.svg">
<p>Data values usually aren’t just numbers, however. They come with units. A Cartesian coordinate system can have two axes representing two different units. This situation arises quite commonly whenever we’re mapping two different types of variables to x and y. In gnuplot, this is done by <code>set size ratio</code> and <code>size</code> option of the terminal (<code>coor1.gp</code>).</p>
<img src="fundamental/img/coor1.svg">
<h2 id="nonlinear-axes"><a class="header" href="#nonlinear-axes">Nonlinear axes</a></h2>
<p>The most commonly used nonlinear scale is the logarithmic scale or log scale for short. The following figure shows the numbers 1, 3.16, 10, 31.6, and 100 placed on linear and log scales (<code>log.gp</code>).</p>
<img src="fundamental/img/log.svg">
<p>As an example, I have taken the number of inhabitants in each county in Texas and have divided it by the median number of inhabitants across all Texas counties (<code>tx.gp</code>).</p>
<img src="fundamental/img/tx.svg"><div style="break-before: page; page-break-before: always;"></div><h1 id="color-scales"><a class="header" href="#color-scales">Color scales</a></h1>
<h2 id="color-as-a-tool-to-distinguish"><a class="header" href="#color-as-a-tool-to-distinguish">Color as a tool to distinguish</a></h2>
<p>We frequently use color as a means to distinguish discrete items or groups that do not have an intrinsic order, such as different countries on a map or different manufacturers of a certain product. In this case, we use a <strong>qualitative</strong> color scale. Many appropriate qualitative color scales are readily available. The following figure shows three representative examples (<code>color.gp</code>). </p>
<img src="fundamental/img/color.svg">
<ul>
<li><a href="https://jfly.uni-koeln.de/color/">Okabe Ito</a> is a color-blind safe qualitative <a href="https://mikemol.github.io/technique/colorblind/2018/02/11/color-safe-palette.html">colorscale</a>.</li>
<li><a href="https://colorbrewer2.org/#type=qualitative&amp;scheme=Dark2&amp;n=7">ColorBrewer Dark2</a> is s provided by the ColorBrewer project.</li>
</ul>
<p>Unfortunately, gnuplot does not provide built-in method to specify a <em>color scale</em>, and you have to do some manual work. Readers can refer to <a href="http://www.gnuplotting.org/color-maps-from-colorbrewer/">Color maps from colorbrewer</a> and <a href="fundamental/../cook/1_30.html#8-how-to-specify-color-schemes">Item 8</a> for more instructions. The following figure is an example of <a href="https://github.com/aschn/gnuplot-colorbrewer/blob/master/qualitative/Paired.plt">Paired.plt</a> provided by <em>ColorBrewer</em> (<code>pair.gp</code>):</p>
<pre><code>f(x,i) = cos(x - 1.0 + i/10.0)

load 'Paired.plt'
plot for [ii=1:8] f(x,ii) ls ii lw 2
</code></pre>
<img src="fundamental/img/pair.svg" width="60%">
<p>Cool! A nice color scheme! </p>
<p>As an example of how we use qualitative color scales, consider the following figure. It shows the percent population growth from 2010 to 2020 in China (<code>population.gp</code>).</p>
<img src="fundamental/img/population.svg">
<h2 id="color-to-represent-data-values"><a class="header" href="#color-to-represent-data-values">Color to represent data values</a></h2>
<p>Color can also be used to represent data values, such as income, temperature, or speed. In this case, we use a <strong>sequential</strong> color scale. Such a scale contains a sequence of colors that clearly indicate (i) which values are larger or smaller than which other ones and (ii) how distant two specific values are from each other. The second point implies that the color scale needs to be perceived to vary uniformly across its entire range.</p>
<p>Sequential scales can be based on a single hue (e.g., from dark blue to light blue) or on multiple hues (e.g., from dark red to light yellow).</p>
<img src="fundamental/img/seq_color.svg">
<ul>
<li>ColorBrewer Blues (from dark to light blue): See more at <a href="https://github.com/aschn/gnuplot-colorbrewer/blob/master/sequential/Blues.plt">Blues.plt</a>.</li>
<li><a href="https://cran.r-project.org/web/packages/viridis/vignettes/intro-to-viridis.html">Viridis</a> (from dark blue via green to light yellow): The viridis palette was initially developed for the python package matplotlib, and was implemented in R later. See more at <a href="https://github.com/Gnuplotting/gnuplot-palettes/blob/master/viridis.pal">viridis.pal</a>.</li>
</ul>
<p>Representing data values as colors is particularly useful when we want to show how the data values vary across geographic regions. In this case, we can draw a map of the geographic regions and color them by the data values. Such maps are called <em>choropleths</em>. Unlike R, gnuplot does not support built-in geo-maps, and readers can refer to useful links:</p>
<ul>
<li><a href="https://github.com/ChenZhongPu/gnuplot-geomap">gnuplot-geomap</a></li>
<li><a href="http://www.gnuplotting.org/us-states-and-election-results/">U.S. states and election results</a></li>
<li><a href="http://www.gnuplotting.org/plotting-the-world/">Plotting the world</a></li>
<li><a href="http://www.gnuplotting.org/plotting-the-world-revisited/">Plotting the world revisited</a></li>
<li><a href="http://www.gnuplotting.org/mercator-projection/">Mercator projection</a></li>
</ul>
<p>The following figure shows an example where I have mapped average GDP onto a map of China (<code>salary.gp</code>).</p>
<img src="fundamental/img/china-salary.svg">
<p>In some cases, we need to visualize the deviation of data values in one of two directions relative to a neutral midpoint. One straightforward example is a dataset containing both positive and negative numbers. We may want to show those with different colors, so that it is immediately obvious whether a value is positive or negative as well as how far in either direction it deviates from zero. The appropriate color scale in this situation is a <strong>diverging</strong> color scale. Diverging scales need to be <em>balanced</em>, so that the progression from light colors in the center to dark colors on the outside is approximately the same in either direction (<code>diverging_color.gp</code>).</p>
<img src="fundamental/img/div_color.svg">
<ul>
<li><a href="https://carto.com/carto-colors/">CARTO Earth</a>: brown to greenish blue.</li>
<li><a href="https://github.com/aschn/gnuplot-colorbrewer/blob/master/diverging/PiYG.plt">ColorBrewer PiYG</a>: pink to yellow-green.</li>
<li>Blue-Red: blue to red. See more at <a href="https://colorspace.r-forge.r-project.org/articles/hcl_palettes.html">HCL-Based Color Palettes</a> and <a href="https://www.heavy.ai/blog/12-color-palettes-for-telling-better-stories-with-your-data">12 Color Palettes for Telling Better Stories with Your Data</a>.</li>
</ul>
<p>As an example application of a diverging color scale, consider the following, which shows the proportion of Urban population of China in 2000 (note that it is always greater than 50% in 2020). Even though percentage is always a positive number, a diverging scale is justified here, because 50% is a meaningful midpoint value. (<code>urban.gp</code>)</p>
<img src="fundamental/img/china-urban.svg">
<h2 id="color-as-a-tool-to-highlight"><a class="header" href="#color-as-a-tool-to-highlight">Color as a tool to highlight</a></h2>
<p>Color can also be an effective tool to highlight specific elements in the data. An easy way to achieve this emphasis is to color these figure elements in a color or set of colors that vividly stand out against the rest of the figure. This effect can be achieved with <strong>accent</strong> color scales (in fact, it is one of the qualitative palettes).</p>
<p>Example accent color scales, each with four base colors and three accent colors:</p>
<img src="fundamental/img/accent_color.svg">
<p>When working with accent colors, it is critical that the baseline colors do not compete for attention. It is easy to make the mistake of using baseline colors that are too colorful, so that they end up competing for the reader’s attention against the accent colors. There is an easy remedy, however. Just remove all color from all elements in the figure except the highlighted data categories or points.</p>
<p>The following figure shows <em>weight</em> and <em>BMI</em> of all American meal athletes in Beijing <a href="https://www.kaggle.com/datasets/heesoo37/120-years-of-olympic-history-athletes-and-results">Olympics</a>, and we can find that boxing athletes are the shortest and leanest (<code>sport.gp</code>).</p>
<img src="fundamental/img/sports.svg"><div style="break-before: page; page-break-before: always;"></div><h1 id="directory-of-visualizations"><a class="header" href="#directory-of-visualizations">Directory of visualizations</a></h1>
<p>This section provides a quick visual overview of the various plots and charts that are commonly used to visualize data.</p>
<h2 id="amount"><a class="header" href="#amount">Amount</a></h2>
<img src="fundamental/img/amount.svg">
<p>The most common approach to visualizing amounts (i.e., numerical values shown for some set of categories) is using bars, or placing dots at the location where the corresponding bar would end (<code>amount.gp</code>).</p>
<p>If there are two or more sets of categories for which we want to show amounts, we can group or stack the bars (<code>amount2.gp</code>).</p>
<img src="fundamental/img/amount2.svg">
<h2 id="distributions"><a class="header" href="#distributions">Distributions</a></h2>
<img src="fundamental/img/distribution.svg">
<p>Histograms and density plots provide the most intuitive visualizations of a distribution, but both require arbitrary parameter choices and can be misleading. Cumulative densities always represents the data faithfully but can be more difficult to interpret (<code>distribution.gp</code>).</p>
<img src="fundamental/img/distribution2.svg">
<p>Boxplots, strip charts, and overlapping density plots are useful when we want to visualize many distributions at once and/or if we are primarily interested in overall shifts among the distributions (<code>distribution2.gp</code>).</p>
<h2 id="proportions"><a class="header" href="#proportions">Proportions</a></h2>
<p>Proportions can be visualized as pie charts, side-by-side bars, or stacked bars. Note that gnuplot does not have built-in support for pie charts.</p>
<h2 id="xy-relationships"><a class="header" href="#xy-relationships">x–y relationships</a></h2>
<img src="fundamental/img/xy.svg">
<p>Scatterplots represent the archetypical visualization when we want to show one quantitative variable relative to another. If we have three quantitative variables, we can map one onto the dot size, creating a variant of the scatterplot called bubble chart (<code>xy.gp</code>).</p>
<img src="fundamental/img/xy2.svg">
<p>When the x axis represents time or a strictly increasing quantity such as a treatment dose, we commonly draw line graphs. We can use smooth lines to represent trends in a larger dataset (<code>xy2.gp</code>).</p>
<h2 id="geospatial-data"><a class="header" href="#geospatial-data">Geospatial data</a></h2>
<p>Although gnuplot does not have built-in support for geospatial data, we can achieve the similar effect by <code>filledcurves</code>. See more at <a href="https://github.com/ChenZhongPu/gnuplot-geomap">gnuplot-geomap
</a>.</p>
<h2 id="uncertainty"><a class="header" href="#uncertainty">Uncertainty</a></h2>
<img src="fundamental/img/error.svg">
<p>Error bars are meant to indicate the range of likely values for some estimate or measurement (<code>error.gp</code>).</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="visualizing-amounts"><a class="header" href="#visualizing-amounts">Visualizing amounts</a></h1>
<p>In many scenarios, we are interested in the magnitude of some set of numbers. The standard visualization in this scenario is the bar plot, which comes in several variations, including simple bars as well as grouped and stacked bars. Alternatives to the bar plot are the dot plot and the heatmap.</p>
<h2 id="bar-plots"><a class="header" href="#bar-plots">Bar plots</a></h2>
<img src="fundamental/img/movie.svg">
<p>Whenever the labels are too long to place horizontally they also don’t look good rotated (<code>movie.gp</code>). The better solution for long labels is usually to swap the x and the y axis, so that the bars run horizontally (<code>movie2.gp</code>).</p>
<img src="fundamental/img/movie2.svg">
<blockquote>
<p>Pay attention to the bar order. If the bars represent unordered categories, order them by ascending or descending data values.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="appendix"><a class="header" href="#appendix">Appendix</a></h1>
<p>This is the appendix.</p>
<blockquote>
<p>The code of this part can be found <code>script/appendix</code>.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="common-abbreviations"><a class="header" href="#common-abbreviations">Common Abbreviations</a></h1>
<table><thead><tr><th>Abbreviation</th><th>Full</th></tr></thead><tbody>
<tr><td>u</td><td>using</td></tr>
<tr><td>t</td><td>title</td></tr>
<tr><td>w</td><td>with</td></tr>
<tr><td>dt</td><td>dashtype</td></tr>
<tr><td>lc</td><td>linecolor</td></tr>
<tr><td>fs</td><td>fillstyle</td></tr>
<tr><td>fc</td><td>fillcolor</td></tr>
<tr><td>ps</td><td>pointsize</td></tr>
<tr><td>lw</td><td>linewidth</td></tr>
<tr><td>term</td><td>terminal</td></tr>
<tr><td>w l</td><td>with lines</td></tr>
<tr><td>w linesp/lp</td><td>with linespoints</td></tr>
<tr><td>w p</td><td>with points</td></tr>
<tr><td>set t</td><td>set terminal</td></tr>
<tr><td>set o</td><td>set output</td></tr>
<tr><td>set logsc</td><td>set logscale</td></tr>
</tbody></table>
<div style="break-before: page; page-break-before: always;"></div><h1 id="time-format"><a class="header" href="#time-format">Time Format</a></h1>
<p>This table is adapted from <em>gnuplot in action</em>.</p>
<table><thead><tr><th style="text-align: left">Conversion specifier</th><th style="text-align: left">Input (<code>set timefmt</code>)</th><th style="text-align: left">Output (<code>set _tics format</code>)</th><th style="text-align: left">Description</th></tr></thead><tbody>
<tr><td style="text-align: left">%a</td><td style="text-align: left"></td><td style="text-align: left">✔️</td><td style="text-align: left">Abbreviated day of the week (e.g., Sun, Mon, ...)</td></tr>
<tr><td style="text-align: left">%A</td><td style="text-align: left"></td><td style="text-align: left">✔️</td><td style="text-align: left">Full day of the week (e.g., Sunday, Monday, ...)</td></tr>
<tr><td style="text-align: left">%b</td><td style="text-align: left">✔️</td><td style="text-align: left">✔️</td><td style="text-align: left">Abbreviated name of the month; three characters (e.g., Jan, Feb, ...)</td></tr>
<tr><td style="text-align: left">%B</td><td style="text-align: left">✔️</td><td style="text-align: left">✔️</td><td style="text-align: left">Full name of the month (e.g., January, February)</td></tr>
<tr><td style="text-align: left">%d</td><td style="text-align: left">✔️</td><td style="text-align: left">✔️</td><td style="text-align: left">Day of the month; always two digits (01-31)</td></tr>
<tr><td style="text-align: left">%D</td><td style="text-align: left"></td><td style="text-align: left">✔️</td><td style="text-align: left">Shorthand for %m/%d/%y (e.g., 03/25/08)</td></tr>
<tr><td style="text-align: left">%F</td><td style="text-align: left"></td><td style="text-align: left">✔️</td><td style="text-align: left">Shorthand for %Y-%m-%d (e.g., 2008-03-25)</td></tr>
<tr><td style="text-align: left">%H</td><td style="text-align: left">✔️</td><td style="text-align: left">✔️</td><td style="text-align: left">24-hour clock; always two digits (00-24)</td></tr>
<tr><td style="text-align: left">%I</td><td style="text-align: left"></td><td style="text-align: left">✔️</td><td style="text-align: left">12-hour clock; always two digits (00-12)</td></tr>
<tr><td style="text-align: left">%j</td><td style="text-align: left">✔️</td><td style="text-align: left">✔️</td><td style="text-align: left">Day of the year; always three digits (001-366)</td></tr>
<tr><td style="text-align: left">%k</td><td style="text-align: left"></td><td style="text-align: left">✔️</td><td style="text-align: left">24-hour clock; one or two digits (0-24)</td></tr>
<tr><td style="text-align: left">%l</td><td style="text-align: left"></td><td style="text-align: left">✔️</td><td style="text-align: left">12-hour clock; one or two digits (0-12)</td></tr>
<tr><td style="text-align: left">%m</td><td style="text-align: left">✔️</td><td style="text-align: left">✔️</td><td style="text-align: left">Month; always two digits (01-12)</td></tr>
<tr><td style="text-align: left">%M</td><td style="text-align: left">✔️</td><td style="text-align: left">✔️</td><td style="text-align: left">Minute; always two digits (00-60)</td></tr>
<tr><td style="text-align: left">%p</td><td style="text-align: left"></td><td style="text-align: left">✔️</td><td style="text-align: left">&quot;am&quot;, &quot;pm&quot;</td></tr>
<tr><td style="text-align: left">%r</td><td style="text-align: left"></td><td style="text-align: left">✔️</td><td style="text-align: left">Shorthand for %I:%M:%S %p (e.g., 10:55:48 pm)</td></tr>
<tr><td style="text-align: left">%R</td><td style="text-align: left"></td><td style="text-align: left">✔️</td><td style="text-align: left">Shorthand for %H:%M (e.g, 22:12)</td></tr>
<tr><td style="text-align: left">%s</td><td style="text-align: left">✔️</td><td style="text-align: left"></td><td style="text-align: left">Unix epoch seconds</td></tr>
<tr><td style="text-align: left">%S</td><td style="text-align: left">✔️</td><td style="text-align: left">✔️</td><td style="text-align: left">Seconds; always two digits (00-60)</td></tr>
<tr><td style="text-align: left">%T</td><td style="text-align: left"></td><td style="text-align: left">✔️</td><td style="text-align: left">Shorthand for %H:%M:%S (e.g, 22:12:48)</td></tr>
<tr><td style="text-align: left">%U</td><td style="text-align: left"></td><td style="text-align: left">✔️</td><td style="text-align: left">Week of the year; starting on Sunday; always two digits (00-53)</td></tr>
<tr><td style="text-align: left">%w</td><td style="text-align: left"></td><td style="text-align: left">✔️</td><td style="text-align: left">Day of the week; 0=Sunday; always two digits (00-06)</td></tr>
<tr><td style="text-align: left">%W</td><td style="text-align: left"></td><td style="text-align: left">✔️</td><td style="text-align: left">Week of the year; starting on Monday; always two digits (00-53)</td></tr>
<tr><td style="text-align: left">%y</td><td style="text-align: left">✔️</td><td style="text-align: left">✔️</td><td style="text-align: left">Year; always two digits (00-99)</td></tr>
<tr><td style="text-align: left">%Y</td><td style="text-align: left">✔️</td><td style="text-align: left">✔️</td><td style="text-align: left">Year; always four digits (0000-9999)</td></tr>
</tbody></table>
<div style="break-before: page; page-break-before: always;"></div><h1 id="greek-letters"><a class="header" href="#greek-letters">Greek Letters</a></h1>
<p>You can use <code>{/Symbol &lt;Alphabet&gt;}</code> to display Greek letters. For example <code>{/Symbol a}</code> is for \(\alpha\).</p>
<h2 id="upper-case"><a class="header" href="#upper-case">Upper case</a></h2>
<table><thead><tr><th>Alphabet</th><th>Full</th><th>Symbol</th></tr></thead><tbody>
<tr><td>A</td><td>Alpha</td><td>A</td></tr>
<tr><td>B</td><td>Beta</td><td>B</td></tr>
<tr><td>C</td><td>Chi</td><td>X</td></tr>
<tr><td>D</td><td>Delta</td><td>\(\Delta\)</td></tr>
<tr><td>E</td><td>Epsilon</td><td>E</td></tr>
<tr><td>F</td><td>Phi</td><td>\(\Phi\)</td></tr>
<tr><td>G</td><td>Gamma</td><td>\(\Gamma\)</td></tr>
<tr><td>H</td><td>Eta</td><td>H</td></tr>
<tr><td>I</td><td>iota</td><td>I</td></tr>
<tr><td>K</td><td>Kappa</td><td>K</td></tr>
<tr><td>L</td><td>Lambda</td><td>\(\Lambda\)</td></tr>
<tr><td>M</td><td>Mu</td><td>M</td></tr>
<tr><td>N</td><td>Nu</td><td>N</td></tr>
<tr><td>O</td><td>Omicron</td><td>O</td></tr>
<tr><td>P</td><td>Pi</td><td>\(\Pi\)</td></tr>
<tr><td>Q</td><td>Theta</td><td>\(\Theta\)</td></tr>
<tr><td>R</td><td>Rho</td><td>P</td></tr>
<tr><td>T</td><td>Tau</td><td>T</td></tr>
<tr><td>U</td><td>Upsilon</td><td>\(\Upsilon\)</td></tr>
<tr><td>W</td><td>Omega</td><td>\(\Omega\)</td></tr>
<tr><td>X</td><td>Xi</td><td>\(\Xi\)</td></tr>
<tr><td>Y</td><td>Phi</td><td>\(\Phi\)</td></tr>
<tr><td>Z</td><td>Zeta</td><td>Z</td></tr>
</tbody></table>
<h2 id="lower-case"><a class="header" href="#lower-case">Lower case</a></h2>
<table><thead><tr><th>Alphabet</th><th>Full</th><th>Symbol</th></tr></thead><tbody>
<tr><td>a</td><td>alpha</td><td>\(\alpha\)</td></tr>
<tr><td>b</td><td>beta</td><td>\(\beta\)</td></tr>
<tr><td>c</td><td>chi</td><td>\(\chi\)</td></tr>
<tr><td>d</td><td>delta</td><td>\(\delta\)</td></tr>
<tr><td>e</td><td>epsilon</td><td>\(\epsilon\)</td></tr>
<tr><td>f</td><td>phi</td><td>\(\phi\)</td></tr>
<tr><td>g</td><td>gamma</td><td>\(\gamma\)</td></tr>
<tr><td>h</td><td>eta</td><td>\(\eta\)</td></tr>
<tr><td>i</td><td>iota</td><td>\(\iota\)</td></tr>
<tr><td>k</td><td>kappa</td><td>\(\kappa\)</td></tr>
<tr><td>l</td><td>lambda</td><td>\(\lambda\)</td></tr>
<tr><td>m</td><td>mu</td><td>\(\mu\)</td></tr>
<tr><td>n</td><td>nu</td><td>\(\nu\)</td></tr>
<tr><td>o</td><td>omicron</td><td>\(\omicron\)</td></tr>
<tr><td>p</td><td>pi</td><td>\(\pi\)</td></tr>
<tr><td>q</td><td>theta</td><td>\(\theta\)</td></tr>
<tr><td>r</td><td>rho</td><td>\(\rho\)</td></tr>
<tr><td>t</td><td>tau</td><td>\(\tau\)</td></tr>
<tr><td>u</td><td>upsilon</td><td>\(\upsilon\)</td></tr>
<tr><td>w</td><td>omega</td><td>\(\omega\)</td></tr>
<tr><td>x</td><td>xi</td><td>\(\xi\)</td></tr>
<tr><td>y</td><td>phi</td><td>\(\phi\)</td></tr>
<tr><td>z</td><td>zeta</td><td>\(\zeta\)</td></tr>
</tbody></table>
<div style="break-before: page; page-break-before: always;"></div><h1 id="3d-data"><a class="header" href="#3d-data">3D Data</a></h1>
<p>Gnuplot support two file formats for 3D data to work with <code>splot</code>. This article is adapted from <em>Gnuplot in Action</em>.</p>
<blockquote>
<p>Usually, 3D plotting does not make much sense since it cannot really provide insights about quantities, and we would like to create its 2D projection (such as <em>heatmap</em>).</p>
</blockquote>
<h2 id="grid-format"><a class="header" href="#grid-format">Grid format</a></h2>
<p>If the data file is in <em>grid format</em>, each line must contain both x and y coordinates, as well as the z value that is to be plotted. Data must be organized into data blocks, which are separated from each other by a single blank line. Each block must contain all data points for <em>a single row of data points</em>.</p>
<pre><code>&lt;x0&gt; &lt;y0&gt; &lt;z(0, 0)&gt;
&lt;x0&gt; &lt;y1&gt; &lt;z(0, 1)&gt;
&lt;x0&gt; &lt;y2&gt; &lt;z(0, 2)&gt;
...
&lt;x0&gt; &lt;yN&gt; &lt;z(0, N)&gt;

&lt;x1&gt; &lt;y0&gt; &lt;z(1, 0)&gt;
&lt;x1&gt; &lt;y1&gt; &lt;z(1, 1)&gt;
...
</code></pre>
<pre><code>splot &quot;grid&quot; u 1:2:3 w lines
</code></pre>
<img src="apdx/image/grid.svg" alt="grid" width="80%">
<h2 id="matrix-format"><a class="header" href="#matrix-format">Matrix format</a></h2>
<p>The <em>matrix format</em><sup class="footnote-reference"><a href="#matrix">1</a></sup> is an alternative file format for data on a regular, rectangular grid. It’s more compact, because it doesn’t store the (redundant) information on x and y coordinates for every data point—only the z values at the grid locations are kept.</p>
<pre><code>splot &quot;matrix&quot; matrix with lines
</code></pre>
<img src="apdx/image/matrix.svg" alt="matrix" width="80%">
<p>Here we need to specify its format as <em>matrix</em> explicitly.</p>
<p><sup class="footnote-reference"><a href="#matrix">1</a></sup> There are two permissible matrix formats, and we only focus on a compact one.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="palettes"><a class="header" href="#palettes">Palettes</a></h1>
<p>Gnuplot provides a facility to map numeric values into a continuous range of colors. The gnuplot command to create and manage such color gradients is <code>set palette</code>. This article is adapted from <em>Gnuplot in Action</em>.</p>
<h2 id="an-example"><a class="header" href="#an-example">An example</a></h2>
<pre><code>set isosamples 200
set palette defined (0 &quot;blue&quot;, 0.5 &quot;light-grey&quot;, 1 &quot;red&quot;)
splot [-2:2][-2:2] exp(-(x**2 +  y**2))*cos(x/4)*sin(y)*cos(2*(x**2+y**2)) w pm3d
</code></pre>
<img src="apdx/image/palette_example.svg" alt="palette_example" width="80%">
<ul>
<li>The <code>isosamples</code> are the number of &quot;samples&quot; in each direction (x and y).</li>
<li>The <code>set palette</code> command is used to create a smooth color gradient palette in gnuplot.</li>
<li>The <code>pm3d</code> (short for palette-mapped 3d) is style for drawing palette-mapped 3d and 4d data as color/gray maps and surfaces.</li>
</ul>
<h2 id="creating-palettes"><a class="header" href="#creating-palettes">Creating palettes</a></h2>
<p>There are basically two different ways to define a color gradient using <code>set palette</code>:</p>
<ul>
<li>Through a discrete set of colors at fixed positions within the numerical range. The <code>st palette</code> command fills in the gaps between these nodes though linear interpolation.</li>
<li>Through a set of three functions (one for each color component) that map the numerical range to a color component.</li>
</ul>
<p>In this article, we only discuss the first method.</p>
<h3 id="color-models-and-components"><a class="header" href="#color-models-and-components">Color models and components</a></h3>
<p>The <code>set palette</code> command can handle five different color models: RGB (reg-green-blue), HSV (hue-saturation-value), CMY, YIQ, and CIE XYZ. For computer graphics, RGB and HSV are by far the most important, and the default is the RBG model in gnuplot.</p>
<p>To specify the three components, the <code>set palette</code> command accepts three different formats:</p>
<ul>
<li>A named color, such as <code>&quot;red&quot;</code>. Use <code>show colornames</code> for a list of permissible colors.</li>
<li>A hex string, such as <code>&quot;#ff0000&quot;</code> or <code>&quot;0xff0000&quot;</code>.</li>
<li>A numeric triple, such as <code>1 0 0</code>.</li>
</ul>
<h3 id="defining-palette-through-nodes"><a class="header" href="#defining-palette-through-nodes">Defining palette through nodes</a></h3>
<p>You can define a palette by specifying a set of colors at fixed locations within the plot range, and gnuplot will fill in the gaps in between. This is, in my opinion, the most useful way to create palettes in practice.</p>
<p>As what we did in the example, we use the <code>defined</code> keyword to specify the list of colors and positions. You can use any of the color format discussed in the previous section, and hence the following four commands are equivalent:</p>
<pre><code>set palette defined ( -1 &quot;red&quot;, 0 &quot;white&quot;, 1 &quot;blue&quot; )
set palette defined ( -1 &quot;#ff0000&quot;, 0 &quot;#ffffff&quot;, 1 &quot;#0000ff&quot; )
set palette defined(-1 100, 0 111, 1 001 ) 
set palette defined ( -1 &quot;red&quot;, 0 &quot;#ffffff&quot;, 1 0 0 1 )
</code></pre>
<p>There’s no limit on the number of entries in the list of colors. The values used as positions aren’t restricted: they can be positive or negative, integer or floating-point. The only constraint is that <strong>they must form a non-decreasing sequence of numbers</strong>. For example, the following is not valid because positions are out of order:</p>
<pre><code>set palette defined ( 0 &quot;red&quot;, -1 &quot;white&quot;, 1 &quot;blue&quot; )
</code></pre>
<p>It is worth noting that the positions need not correspond to actual values from the plot range! In fact, they aren’t absolute positions at all—they’re merely relative positions in the interval spanned by the smallest and the greatest of the positions. You can also use <code>set cbrange</code> to map the palette to the desired plot range.</p>
<h3 id="loading-palette1"><a class="header" href="#loading-palette1">Loading palette<sup class="footnote-reference"><a href="#palette">1</a></sup></a></h3>
<p>I downloaded a palette file (<code>viridis.pal</code>) from <a href="http://www.gnuplotting.org/tag/palette/">Matplotlib colormaps</a>, and then <em>load</em> it in the script:</p>
<pre><code>load 'viridis.pal'
</code></pre>
<img src="apdx/image/color_map.svg" alt="viridis" width="80%">
<p>The complete script can be found at <code>color_map.gp</code>.</p>
<blockquote>
<p>You can use <code>test palette</code> to graphically present palette capabilities.</p>
</blockquote>
<h3 id="sample-palettes"><a class="header" href="#sample-palettes">Sample palettes</a></h3>
<p>Because gnuplot’s default palette isn’t very good, it’s essential that you learn how to define your own palettes. Here are three palettes that are simple enough to keep in mind, so that you can recreate them on the spot.</p>
<p>The first one:</p>
<pre><code>set palette defined ( 0 &quot;blue&quot;, 0.5 &quot;white&quot;, 1 &quot;red&quot; )
</code></pre>
<p>Despite its extreme simplicity, the blue/white/red palette is amazingly convenient and versatile.</p>
<p>The second one conveys a sense of ordering consists of the traffic light colors (red, yellow, and green): </p>
<pre><code>set palette defined ( 0 &quot;web-green&quot;, 0.5 &quot;goldenrod&quot;, 1 &quot;red&quot; )
</code></pre>
<p>In addition to the sense of ordering, this particular trio of colors invariably also conveys a semantic “good/bad” meaning.</p>
<p>The last simple workhorse is the &quot;improved rainbow&quot;:</p>
<pre><code>set palette defined ( 0 'blue', 1 'cyan', 2 'green', 3 'yellow', 4 'red', 5 'magenta')
</code></pre>
<p><sup class="footnote-reference"><a href="#palette">1</a></sup> A nice source for palettes can be found at <a href="https://github.com/Gnuplotting/gnuplot-palettes">Gnuplotting/gnuplot-palettes</a>.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script type="text/javascript">
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>


        <script type="text/javascript">
            window.playground_line_numbers = true;
        </script>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>

        <script src="ace.js" type="text/javascript" charset="utf-8"></script>
        <script src="editor.js" type="text/javascript" charset="utf-8"></script>
        <script src="mode-rust.js" type="text/javascript" charset="utf-8"></script>
        <script src="theme-dawn.js" type="text/javascript" charset="utf-8"></script>
        <script src="theme-tomorrow_night.js" type="text/javascript" charset="utf-8"></script>

        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->

        <script type="text/javascript">
        window.addEventListener('load', function() {
            MathJax.Hub.Register.StartupHook('End', function() {
                window.setTimeout(window.print, 100);
            });
        });
        </script>

    </body>
</html>
